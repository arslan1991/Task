{"version":3,"sources":["lib/toc.js"],"names":[],"mappings":";;;;;;;;;;;;AAAA,IAAI,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;;eACV,OAAO,CAAC,QAAQ,CAAC;;IAA/B,IAAI,YAAJ,IAAI;IAAE,IAAI,YAAJ,IAAI;;gBACF,OAAO,CAAC,aAAa,CAAC;;IAA9B,IAAI,aAAJ,IAAI;;AAGT,SAAS,IAAI,CAAC,KAAK,EAAE;KAAN,GAAG,GAAJ,KAAK,CAAJ,GAAG;;AACjB,QAAO,IAAI,IAAI,CAAC,KAAK,EAAE,SAAS,SAAS,GAAG;AAC3C,SAAO,GAAG,CAAC,MAAM,EAAE,CAAC;EACpB,CAAC,CAAC;CACH;;IAEK,GAAG;AACG,UADN,GAAG,GACM;wBADT,GAAG;;AAEP,MAAI,CAAC,SAAS,GAAG,EAAE,CAAC;EACpB;;cAHI,GAAG;;SAIL,aAAC,QAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;AAC7B,OAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAC,QAAQ,EAAR,QAAQ,EAAE,OAAO,EAAP,OAAO,EAAE,KAAK,EAAL,KAAK,EAAC,CAAC,CAAC;GAChD;;;SAIK,kBAAG;AACR,OAAI,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC;AAC9B,UAAO,QAAQ,CAAC,MAAM,KAAK,CAAC,GAAG,SAAS,GAAG;;;;;;;;;;2BACP,QAAQ;;WAArC,QAAQ,eAAR,QAAQ;WAAE,OAAO,eAAP,OAAO;WAAE,KAAK,eAAL,KAAK;;iBAAe;;;QAC5C;;;SACC;;YAAG,IAAI,EAAE,GAAG,GAAC,QAAQ,AAAC;UAAE,OAAO;UAAK;SACnC,KAAK,CAAC,MAAM,EAAE;SACV;QACF;;;;;;;;;;;;;;;;;;;IACC,CAAC;GACR;;;OAbW,eAAG;AACd,UAAO,IAAI,CAAC,SAAS,CAAC;GACtB;;;QATI,GAAG;;;AAuBT,SAAS,SAAS,CAAC,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE;AACzC,QAAO,IAAI,IAAI,CAAC,UAAU,EAAE,SAAS,YAAY,CAAC,GAAG,EAAE;AACtD,MAAI,QAAQ,GAAG,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,QAAQ,EAAE,CAAC;AAC7C,MAAI,MAAM,GAAG,IAAI,GAAG,EAAE,CAAC;AACvB,MAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,cAAK,GAAG,IAAE,GAAG,EAAE,MAAM,IAAE,CAAC;AAChD,KAAG,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,EAAE,SAAS,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE,MAAM,CAAC,CAAC;AACpD,SAAO,IAAI,OAAO,CAAC,EAAC,QAAQ,EAAR,QAAQ,EAAE,IAAI,EAAJ,IAAI,EAAC,CAAC,CAAC;EACrC,CAAC,CAAC;CACH;;IAEK,OAAO;WAAP,OAAO;;UAAP,OAAO;wBAAP,OAAO;;6BAAP,OAAO;;;cAAP,OAAO;;SACN,kBAAG;kBACe,IAAI,CAAC,SAAS;OAAhC,QAAQ,YAAR,QAAQ;OAAE,IAAI,YAAJ,IAAI;;AACnB,UAAO;;;IAAM,2BAAG,EAAE,EAAE,QAAQ,AAAC,GAAK;IAAC,IAAI,CAAC,MAAM,EAAE;IAAQ,CAAC;GACzD;;;QAJI,OAAO;GAAS,IAAI;;AAO1B,MAAM,CAAC,OAAO,GAAG,EAAC,IAAI,EAAJ,IAAI,EAAE,GAAG,EAAH,GAAG,EAAE,SAAS,EAAT,SAAS,EAAC,CAAC","file":"lib/toc.js","sourcesContent":["var React = require(\"react\");\nvar {Type, Node} = require(\"./base\");\nvar {View} = require(\"./workbench\");\n\n\nfunction VTOC({toc}) {\n\treturn new View(\"toc\", function renderTOC() {\n\t\treturn toc.render();\n\t});\n}\n\nclass TOC {\n\tconstructor() {\n\t\tthis._children = [];\n\t}\n\tadd(fragment, heading, child) {\n\t\tthis._children.push({fragment, heading, child});\n\t}\n\tget children() {\n\t\treturn this._children;\n\t}\n\trender() {\n\t\tvar children = this._children;\n\t\treturn children.length === 0 ? undefined : <ul>{[\n\t\t\tfor ({fragment, heading, child} of children) <li>\n\t\t\t\t<div>\n\t\t\t\t\t<a href={\"#\"+fragment}>{heading}</a>\n\t\t\t\t\t{child.render()}\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t]}</ul>;\n\t}\n}\n\nfunction CTOCEntry(name, headingFn, type) {\n\treturn new Type(\"tocEntry\", function makeTOCEntry(ctx) {\n\t\tvar fragment = ctx.path.ext(name).toString();\n\t\tvar subTOC = new TOC();\n\t\tvar node = type.makeNode({...ctx, toc: subTOC});\n\t\tctx.toc.add(fragment, headingFn(node, ctx), subTOC);\n\t\treturn new TOCNode({fragment, node});\n\t});\n}\n\nclass TOCNode extends Node {\n\trender() {\n\t\tvar {fragment, node} = this.__options\n\t\treturn <span><a id={fragment}></a>{node.render()}</span>;\n\t}\n}\n\nmodule.exports = {VTOC, TOC, CTOCEntry};\n"],"sourceRoot":"/source/"}