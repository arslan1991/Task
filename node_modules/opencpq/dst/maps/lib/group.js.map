{"version":3,"sources":["lib/group.js"],"names":[],"mappings":"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","file":"lib/group.js","sourcesContent":["var React = require(\"react\");\nvar {Type, Node} = require(\"./base\");\nvar {CLabeled} = require(\"./label\");\n\nfunction cmember(name, label, type) {\n\treturn {name, type: CLabeled(label, type)};\n}\n\nfunction cUnlabelledMember(name, type) {\n\treturn {name, type};\n}\n\nfunction makeMemberNode({name, type}, ctx) {\n\tvar {path, value = {}, updateTo} = ctx;\n\treturn {name, node: type.makeNode({\n\t\t...ctx,\n\t\tpath: path.ext(name),\n\t\tvalue: value[name],\n\t\tupdateTo: newValue => updateTo({...value, [name]: newValue})\n\t})};\n}\n\nfunction preprocessMembers(rawMemberDecls, ctx) {\n\tvar members = [];\n\tfunction process(m) {\n\t\tif (m == undefined) {\n\t\t\t// do nothing\n\t\t}\n\t\telse if (m instanceof Array)\n\t\t\tm.forEach(process);\n\t\telse if (m instanceof Function)\n\t\t\tprocess(m(ctx));\n\t\telse\n\t\t\tmembers.push(makeMemberNode(m, ctx));\n\t}\n\tprocess(rawMemberDecls);\n\treturn members;\n}\n\nfunction CGroup(rawMemberDecls) {\n\treturn new Type(\"group\", function makeGroup(ctx) {\n\t\treturn new GroupNode(preprocessMembers(rawMemberDecls, ctx));\n\t});\n}\n\nclass GroupNode extends Node {\n\tconstructor(members) {\n\t\tsuper();\n\t\tthis._members = members;\n\t\tvar indexedMembers = {};\n\t\tmembers.forEach(m => indexedMembers[m.name] = m.node);\n\t\tthis._indexedMembers = indexedMembers;\n\t}\n\tmapMembers(fn) {\n\t\treturn this._members.map(fn);\n\t}\n\tmember(name) {\n\t\treturn this._indexedMembers[name];\n\t}\n\trender() {\n\t\treturn <div className=\"group\">\n\t\t\t{this.mapMembers(({node}) => node == undefined ? undefined : node.render())}\n\t\t</div>;\n\t}\n}\n\nmodule.exports = {CGroup, cmember, cUnlabelledMember, GroupNode, preprocessMembers};\n"],"sourceRoot":"/source/"}