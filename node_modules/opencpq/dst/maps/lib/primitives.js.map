{"version":3,"sources":["lib/primitives.js"],"names":[],"mappings":"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","file":"lib/primitives.js","sourcesContent":["var React = require(\"react\");\nvar {Input, Button} = require(\"react-bootstrap\");\nvar DateTimePicker = require('react-widgets/lib/DateTimePicker');\nvar {confirmOrRetractButton} = require(\"./confirm-retract\");\n\nvar {Type, Node} = require(\"./base\");\nvar {confirmOrRetractButton} = require(\"./confirm-retract\");\nvar {HBox} = require(\"./display\");\n\nfunction makeSimpleType(name, nodeClass) {\n\treturn (options = {}) => new Type(name, function makeSimpleNode({value, updateTo}) {\n\t\tfunction retract() {\n\t\t\tupdateTo(undefined);\n\t\t}\n\t\tvar userSelected = value !== undefined;\n\t\treturn new nodeClass({...options, value, updateTo, retract, userSelected});\n\t});\n}\n\nclass PrimitiveValueNode extends Node {\n}\n\nclass StringNode extends PrimitiveValueNode {\n\tget text() {\n\t\tvar {defaultValue = \"\", value} = this.__options;\n\t\tif (value == undefined || value === \"\")\n\t\t\tvalue = defaultValue;\n\t\treturn value;\n\t}\n\tget value() {\n\t\treturn this.text;\n\t}\n\trender() {\n\t\tvar {value, updateTo, defaultValue = \"\", className, userSelected, retract} = this.__options;\n\t\treturn <Input\n\t\t\tclassName={className}\n\t\t\ttype=\"text\"\n\t\t\tvalue={value}\n\t\t\tplaceholder={defaultValue}\n\t\t\tonChange={e => updateTo(e.target.value)}\n\t\t\tbuttonAfter={confirmOrRetractButton(userSelected, () => updateTo(defaultValue), retract)}\n\t\t/>\n\t}\n}\nvar CString = makeSimpleType(\"string\", StringNode);\n\nclass TextareaNode extends StringNode {\n\trender() {\n\t\tvar {value, updateTo, defaultValue = \"\", className, userSelected, retract} = this.__options;\n\t\treturn <Input\n\t\t\tclassName={className}\n\t\t\ttype=\"textarea\"\n\t\t\tvalue={value}\n\t\t\tplaceholder={defaultValue}\n\t\t\tonChange={e => updateTo(e.target.value)}\n\t\t\tbuttonAfter={confirmOrRetractButton(userSelected, () => updateTo(defaultValue), retract)}\n\t\t/>\n\t}\n}\nvar CTextarea = makeSimpleType(\"textarea\", TextareaNode);\n\n// This is actually for unsigned integers.  TODO: Rename?\nclass IntegerNode extends StringNode {\n\tconstructor(options) {\n\t\tvar {className, defaultValue, value} = options;\n\t\toptions = {...options};\n\t\toptions.className = className ? `${className} integer` : \"integer\";\n\t\tif (typeof defaultValue == \"number\")\n\t\t\toptions.defaultValue = defaultValue.toFixed();\n\t\tif (value != undefined && typeof value != \"string\")\n\t\t\toptions.value = `${value}`;\n\t\tsuper(options);\n\t}\n\tget value() {\n\t\treturn parseInt(this.text);\n\t}\n\trender() {\n\t\treturn <div>\n\t\t\t{super.render()}\n\t\t\t{/[^0-9]/.test(this.text) ?\n\t\t\t // TODO Error message should also go to the problems view.\n\t\t\t <div className=\"validate validate-error\">Input contains non-digits.</div> :\n\t\t\t undefined\n\t\t\t }\n\t\t</div>;\n\t}\n}\nvar CInteger = makeSimpleType(\"integer\", IntegerNode);\n\nclass DateNode extends Node {\n\tget value() {\n\t\tvar {defaultValue, value} = this.__options;\n\t\treturn value || (typeof defaultValue === 'string' ? new Date(defaultValue) : defaultValue);\n\t}\n\trender() {\n\t\tvar {defaultValue, value, updateTo, format, parse} = this.__options;\n\t\t// TODO make user-defined parameterization more generic\n\t\treturn <HBox>\n\t\t\t<DateTimePicker\n\t\t\t\ttime={false}\n\t\t\t\tformat={format || \"MMM dd yyyy\"}\n\t\t\t\tparse={parse || [\"MMM d y\", \"MMM d\", \"M d y\", \"M d\", \"y-M-d\", \"M/d/y\", \"M/d\"]}\n\t\t\t\tvalue={this.value || null}\n\t\t\t\tonChange={updateTo}\n\t\t\t/>\n\t\t\t{\n\t\t\t\t(value || defaultValue) && // Don't display if there is neither a value nor a default value\n\t\t\t\tconfirmOrRetractButton(value != undefined, () => updateTo(this.value), () => updateTo(undefined))\n\t\t\t}\n\t\t</HBox>;\n\t}\n}\nvar CDate = makeSimpleType(\"date\", DateNode);\n\n// FIXME: defaultValue handling\nclass TimeNode extends Node {\n\tget value() {\n\t\tvar {defaultValue, value} = this.__options;\n\t\treturn value || (typeof defaultValue === 'string' ? new Date(defaultValue) : defaultValue);\n\t}\n\trender() {\n\t\tvar {defaultValue, value, updateTo, format, parse} = this.__options;\n\t\t// TODO make user-defined parameterization more generic\n\t\treturn <HBox>\n\t\t\t<DateTimePicker\n\t\t\t\tcalendar={false}\n\t\t\t\tformat={format || \"h:mm tt\"}\n\t\t\t\tparse={parse || [\"h:mm tt\"]}\n\t\t\t\tvalue={this.value || null}\n\t\t\t\tonChange={updateTo}\n\t\t\t/>\n\t\t\t{\n\t\t\t\t(value || defaultValue) && // Don't display if there is neither a value nor a default value\n\t\t\t\tconfirmOrRetractButton(value != undefined, () => updateTo(this.value), () => updateTo(undefined))\n\t\t\t}\n\t\t</HBox>;\n\t}\n}\nvar CTime = makeSimpleType(\"date\", TimeNode);\n\nclass BooleanNode extends PrimitiveValueNode {\n\tget value() {\n\t\tvar {defaultValue = false, value = defaultValue} = this.__options;\n\t\treturn value;\n\t}\n\trender() {\n\t\tvar {userSelected, retract, disabled = false, updateTo} = this.__options;\n\t\treturn <span>\n\t\t\t<input\n\t\t\t\ttype=\"checkbox\"\n\t\t\t\tchecked={this.value}\n\t\t\t\tonChange={e => updateTo(e.target.checked)}\n\t\t\t\tdisabled={disabled}\n\t\t\t/>\n\t\t\t{confirmOrRetractButton(userSelected, () => updateTo(this.value), retract, \"xsmall\")}\n\t\t</span>;\n\t}\n}\nvar CBoolean = makeSimpleType(\"boolean\", BooleanNode);\n\nclass UnitNode extends Node {\n\trender() {\n\t\treturn undefined;\n\t}\n}\nvar CUnit = makeSimpleType(\"unit\", UnitNode);\n\nmodule.exports = {\n    CString, CTextarea, CInteger, CDate, CTime, CBoolean, CUnit\n}\n"],"sourceRoot":"/source/"}